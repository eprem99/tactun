!function(e){"use strict";e.fn.addToCalendar=function(n){var t={},o=e.extend({filename:"sample",target:"_blank",providers:{google:"Google Calendar",outlook:"Outlook Live",yahoo:"Yahoo! Calendar",other:"Other Calendar"},onAddEvent:function(){}},n),a=function(e){return e=(e=e.replace(/-|:|[/]|\.\d\d\d/g,"")+"00").replace(/\s/,"T")};return this.each(function(){e(this).append(new function(e){var n=document.createElement("ul");return n.className="cal-clients",Object.keys(e).forEach(function(t){var o=document.createElement("li");o.textContent=e[t],o.className=t.toLowerCase(),n.appendChild(o)}),n}(o.providers)).mouseleave(function(){var n=e(this).find(".cal-clients");e(document).click(function(t){n.removeClass("is-open"),e(document).unbind("click")})}).on("click",function(n){var o=e(this).find(".cal-clients");n.preventDefault(),t=e(this).data("event"),o.addClass("is-open")}).on("click","li",function(n){var c=e(this).attr("class");!function(e,n){var t,c,d,i,l,r;if(t=void 0===n.title?"":n.title,c=void 0===n.start?(new Date).toISOString():a(n.start),d=void 0===n.end?(new Date).toISOString():a(n.end),i=void 0===n.desc?"":n.desc,l=void 0===n.location?"":n.location,"google"===e)r="http://www.google.com/calendar/render?action=TEMPLATE&text="+encodeURIComponent(t)+"&dates="+encodeURIComponent(c+"/"+d)+"&details="+encodeURIComponent(i)+"&location="+encodeURIComponent(l)+"&output=xml",window.open(r,o.target);else if("outlook"===e)r="https://outlook.live.com/owa/?path=/calendar/action/compose&rru=addevent&subject="+encodeURIComponent(t)+"&startdt="+encodeURIComponent(c)+"&enddt="+encodeURIComponent(d)+"&body="+encodeURIComponent(i)+"&location="+encodeURIComponent(l),window.open(r,o.target);else if("yahoo"===e)r="https://calendar.yahoo.com/?v=60&view=d&type=20&title="+encodeURIComponent(t)+"&st="+encodeURIComponent(c)+"&et="+encodeURIComponent(d)+"&desc="+encodeURIComponent(i)+"&in_loc="+encodeURIComponent(l),window.open(r,o.target);else{if("other"!==e)return!1;var s,p=o.filename+".ics",m="BEGIN:VCALENDAR\n";m+="VERSION:2.0\n",m+="BEGIN:VEVENT\n",m+="DTSTAMP:"+(new Date).toISOString().split(".")[0].replace(/[/]|-|:/g,"")+"Z\n",m+="STATUS:CONFIRMED\n",m+="UID:"+(new Date).getTime()+"addtocalendar\n",m+="DTSTART:"+c+"Z\n",m+="DTEND:"+d+"Z\n",m+="SUMMARY:"+t+"\n",m+="DESCRIPTION:"+i+"\n",m+="X-ALT-DESC;FMTTYPE=text/html:"+i+"\n",m+="LOCATION:"+l+"\n",m+="BEGIN:VALARM\n",m+="TRIGGER:-PT15M\n",m+="ACTION:DISPLAY\n",m+="END:VALARM\n",m+="TRANSP:OPAQUE\n",m+="END:VEVENT\n",m+="END:VCALENDAR",(s=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(m)),s.setAttribute("download",p),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}(c,t),o.onAddEvent.call(this)})})}}(jQuery);